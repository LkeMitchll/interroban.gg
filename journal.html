---
layout: layout.html
---

<h1>Journal</h1>

<h2>Listening</h2>
<h3>Last week</h3>
<section
  x-data="{ totals: {}, isLoading: true }"
  x-init="
      fetch('/api/music-totals')
        .then(response =>  response.json())
        .then(json => { isLoading = false; totals = json })"
>
  <p x-show="isLoading">Loading...</p>
  <p
    x-show="totals.tracks"
    x-text="`${totals.tracks} Tracks, from ${totals.albums} Albums`"
  ></p>
</section>

<h3>Top tracks (this month)</h3>
<ul
  x-data="{ tracks: [], isLoading: true }"
  x-init="
      fetch('https://warp-co.rs/https://interroban.gg/api/music/top')
        .then(response =>  response.json())
        .then(json => { isLoading = false; tracks = json })"
>
  <li x-show="isLoading">Loading...</li>
  <template x-for="track in tracks" :key="track.id">
    <li>
      <p x-text="track.title"></p>
      <p x-text="track.album"></p>
      <p x-text="track.artist"></p>
      <img x-bind:src="track.cover.url" width="50" />
    </li>
  </template>
</ul>
